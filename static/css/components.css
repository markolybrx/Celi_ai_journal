/* --- COMPONENTS.CSS (UI ELEMENTS) --- */

/* --- 1. MODAL SYSTEM (FIXED) --- */
/* This class forces any modal to cover the ENTIRE screen and sit on top */
.modal-overlay, .chat-overlay, #archive-modal, #rank-tree-modal, #profile-modal, #celi-modal, #void-modal {
    position: fixed; 
    top: 0; left: 0; right: 0; bottom: 0;
    width: 100vw; height: 100vh;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(8px);
    z-index: 9999 !important; /* Force Top */
    display: none; /* Hidden by default */
    align-items: center; 
    justify-content: center;
    padding: 20px; /* Prevent touching edges */
}

/* Active State - This makes them appear */
.modal-overlay.active, .chat-overlay.active, #archive-modal.active, #rank-tree-modal.active, #profile-modal.active, #celi-modal.active, #void-modal.active {
    display: flex !important;
    animation: fadeIn 0.2s ease-out forwards;
}

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* --- 2. HEADER ELEMENTS --- */
.header-pfp { 
    width: 40px; height: 40px; border-radius: 50%; 
    background-color: #333; overflow: hidden; 
    border: 2px solid var(--border); 
    cursor: pointer;
    transition: transform 0.2s;
}
.header-pfp:active { transform: scale(0.9); border-color: var(--mood); }
.header-pfp img { width: 100%; height: 100%; object-fit: cover; }

/* --- 3. CALENDAR & PICKER --- */
.calendar-card {
    position: relative;
    background: var(--card-bg); border: 1px solid var(--border);
    border-radius: 24px; padding: 20px; margin-bottom: 20px;
    min-height: 380px; display: flex; flex-direction: column;
}

.cal-header { display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; margin-bottom: 20px; }
.cal-right-controls { display: flex; align-items: center; justify-self: end; gap: 10px; }

.cal-title { font-weight: 800; font-size: 16px; text-transform: uppercase; letter-spacing: 1px; color: var(--text); }
.cal-btn { width: 36px; height: 36px; border-radius: 50%; border: 1px solid var(--border); background: var(--input-bg); color: var(--text); display: flex; align-items: center; justify-content: center; font-size: 18px; cursor: pointer; }

/* The Picker Overlay inside the card */
.cal-picker {
    position: absolute; top: 0; left: 0; right: 0; bottom: 0;
    background: var(--card-bg); /* Match Theme */
    z-index: 50; padding: 20px;
    display: none; flex-direction: column;
    border-radius: 24px;
}
.cal-picker.active { display: flex; animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
@keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

/* Calendar Grid */
.cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; text-align: center; }
.cal-day { height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 10px; font-size: 14px; position: relative; color: var(--text-muted); }
.cal-day.today { background: var(--border); color: var(--text); font-weight: 900; }

/* Dots */
.cal-day.has-entry::after { content: ''; position: absolute; bottom: 6px; width: 4px; height: 4px; border-radius: 50%; background: var(--mood); box-shadow: 0 0 5px var(--mood); }
.cal-day.has-void::after { content: ''; position: absolute; bottom: 6px; width: 4px; height: 4px; border-radius: 50%; background: #a855f7; box-shadow: 0 0 5px #a855f7; }

/* --- 4. FLOATING BUTTONS (FABS) --- */
.void-container { position: fixed; bottom: 100px; left: 20px; z-index: var(--z-fab); }
.fab-container { position: fixed; bottom: 100px; right: 20px; z-index: var(--z-fab); }

.void-fab, .chat-fab {
    width: 60px; height: 60px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    cursor: pointer; transition: transform 0.2s;
}
.void-fab { background: #000; border: 1px solid #333; }
.chat-fab { background: linear-gradient(135deg, var(--mood), #fff); color: #000; }
.void-fab:active, .chat-fab:active { transform: scale(0.9); }

/* --- 5. RANK TREE & ARCHIVE MODAL CONTENT --- */
/* Note: The overlay logic is handled in section 1 */
.archive-media-container { width: 100%; margin-top: 15px; border-radius: 12px; overflow: hidden; border: 1px solid var(--border); }
.archive-img { width: 100%; display: block; }
