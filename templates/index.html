<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Celi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --mood: #00f2fe; }
        body { background: #000; color: #fff; overflow: hidden; font-family: sans-serif; margin: 0; }
        
        /* Galaxy Layers */
        #galaxy-layer { position: fixed; inset: 0; background: radial-gradient(circle at 50% 100%, #050510 0%, #000 100%); z-index: 80; transform: translateY(100%); transition: 0.8s cubic-bezier(0.16, 1, 0.3, 1); }
        #galaxy-layer.active { transform: translateY(0); }
        .dust { position: absolute; background: #fff; border-radius: 50%; opacity: 0.1; pointer-events: none; transition: transform 0.1s; }
        
        /* Trivia Modal */
        #celi-bubble { 
            position: fixed; bottom: 210px; right: 24px; width: 260px; 
            background: #fff; color: #000; padding: 22px; border-radius: 25px 25px 5px 25px; 
            display: none; z-index: 450; box-shadow: 0 0 30px var(--mood); 
            animation: popUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        #celi-bubble::after { content: ''; position: absolute; bottom: -10px; right: 10px; border-width: 10px 10px 0 0; border-color: #fff transparent transparent transparent; }
        
        @keyframes popUp { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        /* Nav & Sync */
        #sync-indicator { position: fixed; top: 30px; left: 50%; transform: translateX(-50%); background: rgba(0,242,254,0.1); border: 1px solid rgba(0,242,254,0.3); padding: 8px 16px; border-radius: 100px; display: none; z-index: 1000; }
    </style>
</head>
<body>
    <div id="sync-indicator" class="text-[9px] font-black uppercase tracking-widest text-[#00f2fe]">Syncing Thoughts...</div>

    <div id="galaxy-layer">
        <div id="dust-field" class="absolute inset-0"></div>
        <div id="star-field" class="relative w-full h-full"></div>
    </div>

    <div id="celi-bubble">
        <div class="text-[10px] font-black uppercase text-blue-600 mb-1">Celi's Discovery</div>
        <p id="trivia-text" class="text-sm font-medium leading-tight"></p>
        <button onclick="hideBubble()" class="mt-3 text-[9px] font-black uppercase opacity-40">Dismiss</button>
    </div>

    <div id="celi-trigger" onclick="toggleChat()" class="fixed bottom-[130px] right-[24px] z-[400] w-[68px] h-[68px] bg-white/10 border-2 border-white/20 rounded-full flex items-center justify-center">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
    </div>

    <nav class="fixed bottom-8 left-1/2 -translate-x-1/2 w-[90%] bg-white/5 backdrop-blur-xl border border-white/10 h-16 rounded-full flex justify-around items-center z-[500]">
        <span class="text-[9px] font-black uppercase opacity-40" onclick="toggleGalaxy()">View Galaxy</span>
    </nav>

    <script>
        let isGalaxyOpen = false;
        let queue = JSON.parse(localStorage.getItem('celi_queue') || "[]");

        function toggleGalaxy() {
            isGalaxyOpen = !isGalaxyOpen;
            document.getElementById('galaxy-layer').classList.toggle('active', isGalaxyOpen);
        }

        function announceTrivia(text, color) {
            document.documentElement.style.setProperty('--mood', color);
            document.getElementById('trivia-text').innerText = text;
            document.getElementById('celi-bubble').style.display = 'block';
        }

        function hideBubble() { document.getElementById('celi-bubble').style.display = 'none'; }

        // Parallax Effect
        window.addEventListener('deviceorientation', (e) => {
            if(!isGalaxyOpen) return;
            const x = e.gamma / 5, y = e.beta / 5;
            document.getElementById('dust-field').style.transform = `translate(${x*2}px, ${y*2}px)`;
        });

        // Initialize Background Dust
        const field = document.getElementById('dust-field');
        for(let i=0; i<50; i++) {
            const d = document.createElement('div');
            d.className = 'dust';
            d.style.width = '2px'; d.style.height = '2px';
            d.style.left = Math.random()*100+'%'; d.style.top = Math.random()*100+'%';
            field.appendChild(d);
        }
    </script>
</body>
</html>
